# GitHub学习笔记

## 一、Git简介

### 1.1 Git是什么

+ Git是世界上最先进的**分布式版本控制系统**；

+ Git由Linux开发者**Linus**用C语言开发。

### 1.2 为什么要用Git

自己 “手动” 管理各个版本的缺点：   

+ 想找到之前版本中的信息很困难；
+ 不敢删除旧版本，因为可能将来还会用到；
+ 与别人合作开发时很麻烦，需要手动合并两个人的修改信息。

因此，为了能够**自动地**进行版本控制，Git诞生了！

### 1.3 集中式&分布式

#### （1）集中式

**特点：**集中式版本控制系统的版本库存放在**中央服务器**。

**缺点：**需要联网才能操作。

**举例：**

+ CVS：**最早的**版本控制系统，提交文件有时会不完整，版本库会莫名发生损坏；
+ SVN：**目前用的最多**的版本控制系统；
+ VSS：微软公司开发的版本控制系统。

#### （2）分布式

**特点：**不存在“中央服务器”，每个人的电脑上都是一个完整的版本库。

**优点：**①无需联网便能工作；②安全性高（若一台电脑坏了，可以直接从另一台复制一个一模一样的版本库，而集中式的中央服务器如果坏了，那所有的版本库就都没有了）。

> 分布式版本控制系统其实也有一个充当“中央服务器”的电脑，但是它只起到一个**“方便交换”**的作用，没有这个“中央服务器”，丝毫不影响大家在各自的电脑上干活，只是交换版本稍微麻烦点而已。

**举例：**

+ Git：最好用； 
+ 其他：Bitkeeper, Mercurial, Bazaar 等。

### 1.4 版本库简介

**版本库（repository）：**也叫“仓库”，可以理解为一个目录，这个目录里的所有文件都可以被Git管理起来，Git可以跟踪版本库中每个文件的修改、删除等操作，以便于在任何时刻都能够追踪历史，或在将来某个时刻“还原”。

**版本库常用操作：**

+ `git init`初始化一个仓库（本地文件夹想要被Git管理，必须先将其初始化为一个仓库）；

+ `cd`进入指定目录，`pwd`显示当前所在路径；

+ `git add <file>`添加文件到暂存区（可以反复使用，多次添加）；
+ `git commit -m "message"`向版本库提交文件（一次性将暂存区的所有文件提交到版本库）。

## 二、时光机穿梭

通过Git可以将项目随时回退到任一个历史版本，也可以在回退后重新返回到未来的已有版本。

**常用操作：**`git status`查看当前工作区的状态；`git diff`查看哪些文件被修改了，并展示修改内容。

### 2.1 版本回退

`git log`显示提交的日志（最近到最远），显示的一大串数字即为版本号（commit ID）；

`cat <file>`查看file文件的内容；

`git reset --hard <commit ID>`将项目重置为指定的版本；

`git reflog`查看命令历史，以找到所需要的版本号。

**Tips：**

+ Git中，`HEAD`表示当前版本，`HEAD^`表示上一版本，`HEAD^^`表示上上个版本，以此类推，`HEAD~100`表示上100个版本；

+ `HEAD`实际上是一个指针，指向当前的版本；

+ 想要**回到过去**某个版本，可以先用`git log`查看提交历史，以确定回到哪个版本；

+ 想要**重返未来**某个版本，但是`git log`中已不含未来版本的commit ID，此时可用`git reflog`查看命令历史，找到所需的未来版本号。

### 2.2 工作区和暂存区

Git与其他的版本控制系统（如SVN）的一个不同点是：有**暂存区**。

几个概念的关系如下：

+ **工作区**（Working directory）：当前文件夹；
+ **版本库**（Repository）：是工作区中的隐藏目录（`.git`文件夹）。
  + 版本库中有**暂存区**（stage）；
  + 版本库中也有Git为项目自动创建的第一个分支`master`，以及指向它的指针`HEAD`。

图形表示为：

![git-repo](https://www.liaoxuefeng.com/files/attachments/919020037470528/0)

`git add`把工作区的文件修改添加到暂存区；

`git commit`把暂存区的所有内容提交到当前分支（`master`）；

*当暂存区没有任何内容时，Git会输出显示“Nothing to commit, working tree clean.”*

### 2.3 管理修改

Git为什么比其他的版本控制系统更加优秀？因为Git跟踪并管理的是**修改**，而不是**文件**！

每次修改，如果没有`git add`到暂存区，则该修改不会被commit，所以想要提交修改，必须先将其add到暂存区；

`git diff HEAD --<file>`查看工作区和版本库中`<file>`文件的区别。

### 2.4 撤销修改

`git checkout --<file>`撤销**工作区**中的所有修改。

> `git checkout`的撤销机制是：将`<file>`文件回退到最近一次`git commit`或`git add`的状态。包括两种情况：
>
> （1）文件修改后，没有add到暂存区。那么`git checkout`后回退到修改之前和版本库一样的状态；（2）文件修改后，已经add到了暂存区，而且在add之后在工作区又做了第二次修改。此时`git checkout`后只能回到第一次修改之后（第二次修改之前）的状态，而无法回到第一次修改之前的状态。

`git reset HEAD <file>`可以撤销**暂存区**的修改，并重新放回**工作区**。

**小结：**

假设你在工作区的`<file>`文件中不小心添加了一个修改内容，该内容是机密信息，不可泄露给任何人，那么：

+ 若修改还没有`git add`，直接用`git checkout --<file>`撤销工作区中的修改；
+ 若修改已经`git add`，那么先用`git reset HEAD <file>`撤销暂存区的修改，使修改回到工作区，再用`git checkout --<file>`撤销工作区的修改；
+ 若修改已经`git commit`，直接用`git reset`回退版本；
+ 若修改已经`git commit`，而且已经推送到了远程版本库（如Github），那就没办法了，该机密信息有可能已经泄露了！

### 2.5 删除修改

`rm <file>`直接在工作区删除`<file>`文件（等价于自己鼠标右键手动删除）；

`git rm <file>`在版本库&工作区中均删除指定文件。

>在`rm <file>`或者自己手动删除工作区文件后，若是确实需要删除，那么可以紧接着用`git rm <file>`在版本库中也将其删除；若是误删，可以用`git checkout --<file>`将其恢复。
>
>`git checkout --<file>`操作的**实质**是：用版本库中的文件版本替换当前工作区中的版本，无论工作区中的文件是被修改还是被删除（**类似于一键还原**）。

## 三、远程仓库

